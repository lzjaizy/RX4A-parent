<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rx.shiro.dao.UserDao">
    <!--<resultMap id="userMap" type="net.wanho.entity.User">-->
        <!--<id property="id" column="id"></id>-->
        <!--<result property="name" column="name"></result>-->
    <!--</resultMap>-->
    <select id="findByLoginName" parameterType="String" resultType="com.rx.shiro.entity.Account">
        select * from t_account where login_name=#{login_name}
    </select>

    <insert id="register" parameterType="com.rx.shiro.entity.Account">
        insert into t_account(id,name,login_name,salt,password)
        values(#{id},#{name},#{login_name},#{salt},#{password})
    </insert>

    <insert id="registerToT_User" parameterType="com.rx.shiro.entity.User">
        insert into t_user(id,name,login_name)
        values(#{id},#{name},#{login_name})
    </insert>

    <select id="findT_UserBylogin_name" parameterType="String" resultType="com.rx.shiro.entity.User">
        select * from t_user where login_name=#{login_name}
    </select>

    <select id="findRoleIdByUid" parameterType="String" >
        select role_id from t_link_user_role where user_id=#{id}
    </select>

    <select id="findCodeByRoleId" parameterType="String" >
        select code from t_role where id=#{roleId}
    </select>

    <select id="findResourceByRoleId" parameterType="String" >
        select resource_id from t_link_role_resource where role_id=#{roleId}
    </select>

    <select id="findReourceCodeByResouId" parameterType="String" >
        select code from t_resources where id=#{resourceId}
    </select>

</mapper>